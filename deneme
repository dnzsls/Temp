from datetime import datetime, timedelta

# Shift tanımları (başlangıç ve bitiş saatleri)
shift_definitions = {
    "08:00": "17:00",
    "08:30": "17:30",
    "00:00": "08:00",
    "09:00": "18:00",
    # ... diğer shiftler
}

# Time objesine çevir
def time_from_str(time_str):
    return datetime.strptime(time_str, '%H:%M').time()

# Bir saatte hangi shiftler aktif?
def get_active_shifts(check_hour, shift_definitions):
    check_time = time_from_str(check_hour)
    active_shifts = []
    
    for start, end in shift_definitions.items():
        start_time = time_from_str(start)
        end_time = time_from_str(end)
        
        # Gece vardiyası kontrolü (00:00 - 08:00 gibi)
        if end_time < start_time:  # Gece yarısını geçiyor
            if check_time >= start_time or check_time < end_time:
                active_shifts.append(start)
        else:  # Normal vardiya
            if start_time <= check_time < end_time:
                active_shifts.append(start)
    
    return active_shifts

# Tüm saatleri oluştur (30 dakikalık)
def generate_hours():
    hours = []
    for h in range(24):
        hours.append(f"{h:02d}:00")
        hours.append(f"{h:02d}:30")
    return hours

# Otomatik saat_map oluştur
all_hours = generate_hours()
saat_map = {}

for hour in all_hours:
    saat_map[hour] = get_active_shifts(hour, shift_definitions)

print("Otomatik oluşturulan saat_map:")
for hour, shifts in sorted(saat_map.items()):
    if shifts:  # Boş olmayanları göster
        print(f"{hour}: {shifts}")
